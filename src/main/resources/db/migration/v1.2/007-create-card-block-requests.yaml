databaseChangeLog:
  - changeSet:
      id: 190525-01-create-card-block-requests
      author: Crystal
      changes:
        - createTable:
            columns:
            - column:
                name: id
                type: BIGINT
                constraints:
                  nullable: false
                  primaryKey: true
                  primaryKeyName: card_block_request_pkey
                autoIncrement: true
            - column:
                name: card_id
                type: BIGINT
                constraints:
                  nullable: false
            - column:
                name: created_at
                type: TIMESTAMP WITH TIME ZONE
                defaultValueComputed: CURRENT_TIMESTAMP
                constraints:
                  nullable: false
                  updatable: false
            - column:
                name: processed_at
                type: TIMESTAMP WITH TIME ZONE
                defaultValueComputed: CURRENT_TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: processed_by
                type: BIGINT
            - column:
                name: status
                type: VARCHAR(16)
                defaultValue: 'PENDING'
                constraints:
                  nullable: false
            tableName: card_block_requests
        - addForeignKeyConstraint:
            baseColumnNames: card_id
            baseTableName: card_block_requests
            constraintName: block_request_bank_card_id_fkey
            deferrable: false
            initiallyDeferrable: false
            ON DELETE: CASCADE
            ON UPDATE: NO ACTION
            referencedColumnNames: id
            referencedTableName: bank_cards
            validate: true
        - addForeignKeyConstraint:
            baseColumnNames: processed_by
            baseTableName: card_block_requests
            constraintName: block_request_processed_by_fkey
            deferrable: false
            initiallyDeferrable: false
            ON DELETE: NO ACTION
            ON UPDATE: NO ACTION
            referencedColumnNames: id
            referencedTableName: accounts
            validate: true